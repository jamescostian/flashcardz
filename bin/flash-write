#!/usr/bin/env node
var stackBuffer = ''
process.stdin.setEncoding('utf8')
process.stdin.on('data', function (data) {
	stackBuffer += data
})

var program = require('commander')

program
	.version(require('../package.json').version)
	.usage('[options] [name]')
	.option('-p, --path [dir]', 'Path where flashcardz are [~/.flashcardz]', '~/.flashcardz')
	.parse(process.argv)

if (program.args.length !== 1) {
	console.error('You must specify exactly 1 argument (the name of stack to write this data to)')
	process.exit()
}
else {
	var f = require('../lib/module.js')({path: program.path})
	f.refresh()
	process.stdin.on('end', function() {
		f.insertStack(program.args[0], JSON.parse(stackBuffer))
		f.save()
	})
}
