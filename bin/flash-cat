#!/usr/bin/env node
var program = require('commander')

program
	.version(require('../package.json').version)
	.usage('[options] [names...]')
	.option('-p, --path [dir]', 'Path where flashcardz are [~/.flashcardz]', '~/.flashcardz')
	.option('-s, --spaces [number]', 'Number of spaces to indent the JSON [4]', '4')
	.parse(process.argv)

var f = require('../lib/module.js')({path: program.path})
f.refresh()

// Collect all of the cards in this array
var stuff = []

program.args.forEach(function (stackName) {
	f.stacks[stackName].forEach(function (card) {
		stuff.push(card)
	})
})

var spaces
if (program.spaces === '\t' || program.spaces === '\\t') {
	spaces = '\t'
}
else {
	spaces = parseInt(program.spaces)
}
console.log(JSON.stringify(stuff, null, spaces))
